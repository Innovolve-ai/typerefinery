{
  "id": "cms",
  "name": "Websight CMS",
  "description": "Websight CMS",
  "enabled": true,
  "status": "-1",
  "icon": "pi pi-cog",
  "servicetype": 10,
  "execconfig": {
    "execservice": { "id": "java" },
    "commandline": {
      "win32": "--add-opens java.base/java.lang=ALL-UNNAMED -jar ${SERVICE_HOME}\\config\\org.apache.sling.feature.launcher.jar -c ${SERVICE_HOME}\\config\\cache -CC \"org.apache.sling.commons.log.LogManager=MERGE_LATEST\" -D oak.mongo.uri=\"${MONGO_DB_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.host.url=\"${FLOW_HOST_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.ws.url=\"${FLOW_WS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.tms.url=\"${FLOW_TMS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.designer.url=\"${FLOW_DESIGNER_URL}\" -D org.osgi.service.http.port=${SERVICE_PORT} -p ${SERVICE_DATA_PATH} -f ${SERVICE_HOME}\\config\\cache\\ai\\typerefinery\\websight\\typerefinery-distribution\\1.0.0-SNAPSHOT\\typerefinery-distribution-1.0.0-SNAPSHOT-typerefinery-websight.slingosgifeature,${SERVICE_HOME}\\config\\cache\\ai\\typerefinery\\websight\\typerefinery-distribution\\1.0.0-SNAPSHOT\\typerefinery-distribution-1.0.0-SNAPSHOT-docker.slingosgifeature",
      "darwin": "--add-opens java.base/java.lang=ALL-UNNAMED -jar ${SERVICE_HOME}/config/org.apache.sling.feature.launcher.jar -c ${SERVICE_HOME}/config/cache -CC \"org.apache.sling.commons.log.LogManager=MERGE_LATEST\" -D oak.mongo.uri=\"${MONGO_DB_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.host.url=\"${FLOW_HOST_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.ws.url=\"${FLOW_WS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.tms.url=\"${FLOW_TMS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.designer.url=\"${FLOW_DESIGNER_URL}\" -D org.osgi.service.http.port=${SERVICE_PORT} -p ${SERVICE_DATA_PATH} -f cache/ai/typerefinery/websight/typerefinery-distribution/1.0.0-SNAPSHOT/typerefinery-distribution-1.0.0-SNAPSHOT-typerefinery-websight.slingosgifeature,cache/ai/typerefinery/websight/typerefinery-distribution/1.0.0-SNAPSHOT/typerefinery-distribution-1.0.0-SNAPSHOT-docker.slingosgifeature",
      "linux": "--add-opens java.base/java.lang=ALL-UNNAMED -jar ${SERVICE_HOME}/config/org.apache.sling.feature.launcher.jar -c ${SERVICE_HOME}/config/cache -CC \"org.apache.sling.commons.log.LogManager=MERGE_LATEST\" -D oak.mongo.uri=\"${MONGO_DB_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.host.url=\"${FLOW_HOST_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.ws.url=\"${FLOW_WS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.tms.url=\"${FLOW_TMS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.designer.url=\"${FLOW_DESIGNER_URL}\" -D org.osgi.service.http.port=${SERVICE_PORT} -p ${SERVICE_DATA_PATH} -f cache/ai/typerefinery/websight/typerefinery-distribution/1.0.0-SNAPSHOT/typerefinery-distribution-1.0.0-SNAPSHOT-typerefinery-websight.slingosgifeature,cache/ai/typerefinery/websight/typerefinery-distribution/1.0.0-SNAPSHOT/typerefinery-distribution-1.0.0-SNAPSHOT-docker.slingosgifeature",
      "default": "--add-opens java.base/java.lang=ALL-UNNAMED -jar ${SERVICE_HOME}\\config\\org.apache.sling.feature.launcher.jar -c ${SERVICE_HOME}\\config\\cache -CC \"org.apache.sling.commons.log.LogManager=MERGE_LATEST\" -D oak.mongo.uri=\"${MONGO_DB_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.host.url=\"${FLOW_HOST_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.ws.url=\"${FLOW_WS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.tms.url=\"${FLOW_TMS_URL}\" -D ai.typerefinery.websight.services.flow.FlowService.flow.designer.url=\"${FLOW_DESIGNER_URL}\" -D org.osgi.service.http.port=${SERVICE_PORT} -p ${SERVICE_DATA_PATH} -f ${SERVICE_HOME}\\config\\cache\\ai\\typerefinery\\websight\\typerefinery-distribution\\1.0.0-SNAPSHOT\\typerefinery-distribution-1.0.0-SNAPSHOT-typerefinery-websight.slingosgifeature,${SERVICE_HOME}\\config\\cache\\ai\\typerefinery\\websight\\typerefinery-distribution\\1.0.0-SNAPSHOT\\typerefinery-distribution-1.0.0-SNAPSHOT-docker.slingosgifeature"
    },
    "datapath": "/server/data",
    "serviceport": 8113,
    "healthcheck": {
      "type": "http",
      "url": "http://localhost:${SERVICE_PORT}/system/health",
      "expected_status": 200,
      "retries": 90
    },
    "depend_on": [
      "totaljs-flow",
      "totaljs-messageservice",
      "mongo",
      "nginx"
    ],
    "env": {
      "FLOW_HOST_URL": "http://localhost:${API_PORT}",
      "FLOW_TMS_URL": "ws://localhost:${MESSAGESERVICE_PORT}/$tms",
      "FLOW_WS_URL": "ws://localhost:${FLOW_PORT}/flows/%s",
      "FLOW_DESIGNER_URL": "http://localhost:${FLOW_PORT}/designer/?darkmode=%s&socket=%s&components=%s",
      "MONGO_DB_URL": "mongodb://${MONGO_USERNAME}:${MONGO_PASSWORD}@${MONGO_HOST}:${MONGO_PORT}"
    },
    "globalenv": {
      "CMS_PORT": "${SERVICE_PORT}"
    }
  }
}
